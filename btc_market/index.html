<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="block chain," />





  <link rel="alternate" href="/atom.xml" title="TimChen" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="市场  2018.01.08 Total Market Capitalization is up to 820 billion dollars, which is roughly equivalent to one year GDP of Turkey. Info source  bitcoinity有相对可靠地成交量的数据    现货交易所  已注册：">
<meta name="keywords" content="block chain">
<meta property="og:type" content="article">
<meta property="og:title" content="Digital Currency Market">
<meta property="og:url" content="http://timchen314.com/btc_market/index.html">
<meta property="og:site_name" content="TimChen">
<meta property="og:description" content="市场  2018.01.08 Total Market Capitalization is up to 820 billion dollars, which is roughly equivalent to one year GDP of Turkey. Info source  bitcoinity有相对可靠地成交量的数据    现货交易所  已注册：">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-07-18T07:22:53.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Digital Currency Market">
<meta name="twitter:description" content="市场  2018.01.08 Total Market Capitalization is up to 820 billion dollars, which is roughly equivalent to one year GDP of Turkey. Info source  bitcoinity有相对可靠地成交量的数据    现货交易所  已注册：">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://timchen314.com/btc_market/"/>





  <title>Digital Currency Market | TimChen</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">TimChen</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://timchen314.com/btc_market/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tim Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TimChen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Digital Currency Market</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-17T18:00:00+08:00">
                2018-04-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/block-chain/" itemprop="url" rel="index">
                    <span itemprop="name">block chain</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/btc_market/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="btc_market/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="市场">市场</h3>
<ul>
<li>2018.01.08 Total Market Capitalization is up to 820 billion dollars, which is roughly equivalent to one year GDP of Turkey.</li>
<li>Info source
<ul>
<li><a href="https://data.bitcoinity.org/markets/volume/6m?c=e&amp;r=day&amp;t=b" target="_blank" rel="external">bitcoinity</a>有相对可靠地成交量的数据</li>
</ul>
</li>
</ul>
<h4 id="现货交易所">现货交易所</h4>
<ul>
<li>已注册：</li>
</ul>
<a id="more"></a>
<ul>
<li>
<p>币安Binance<br>
<a href="https://zhuanlan.zhihu.com/p/32890420" target="_blank" rel="external">从零开始的比特币购买与储存图文教程</a><br>
费用：充值免费；提现：0.0005 BTC ≈ 3到5$；交易: 0.1%</p>
</li>
<li>
<p>huobi，一般用手机号登录，不像其他网站用邮箱<br>
[x] 杠杆</p>
</li>
<li>
<p>otcbtc<br>
<a href="https://zhuanlan.zhihu.com/p/32758860" target="_blank" rel="external">如何购买 Cardano(ADA) 或其它加密币？</a></p>
</li>
<li>
<p><a href="http://xn--localbitcoins-vv2u921hvhgs65bqno.com" target="_blank" rel="external">场外交易所localbitcoins.com</a> <strong>全球最大</strong><br>
<a href="https://www.bilibili.com/video/av14653153/?from=search&amp;seid=7472298098998538778" target="_blank" rel="external">用法</a></p>
</li>
</ul>
<ul>
<li>
<p>btc交易份额：<br>
<a href="https://coinmarketcap.com/currencies/bitcoin/#markets" target="_blank" rel="external">https://coinmarketcap.com/currencies/bitcoin/#markets</a><br>
可以注册火币  币安或者OKcoin  先用法币购买usdt  然后就可以购买比特币或者其他的了</p>
</li>
<li>
<p>未注册</p>
<ul>
<li>OKEx<br>
份额世界最大 国内团队 <strong>交易量造假</strong></li>
<li>bitstamp 注册于卢森堡</li>
<li>gdad 美国加州 属于Coinbase公司</li>
<li>bitfinex 香港</li>
<li><a href="http://xn--coincola-570m522evvenm7av7k.com" target="_blank" rel="external">场外交易所coincola.com</a> <strong>骗子交易所</strong></li>
</ul>
</li>
<li>
<p>火币huobi</p>
<ul>
<li>溢价(时间为02.08 16:30)</li>
</ul>
<table>
<thead>
<tr>
<th>品种</th>
<th>实价￥</th>
<th>估价￥</th>
<th>溢价比率(%)</th>
</tr>
</thead>
<tbody>
<tr>
<td>BTC</td>
<td>53800</td>
<td>52430</td>
<td>2.6</td>
</tr>
<tr>
<td>ETH</td>
<td>5388</td>
<td>5244</td>
<td>2.7</td>
</tr>
<tr>
<td>USTD</td>
<td>6.44</td>
<td>6.31</td>
<td>2.0</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>费率<br>
ETH/USTD 0.2%<br>
ETH提币 0.01ETH<br>
btc提币 0.001btc（这是btc网络交易费）<br>
ustd提币 10ustd<br>
总结：提币费用总在10美元左右</p>
</li>
<li>
<p>app</p>
<ul>
<li><s>需要香港的apple ID；<br>
申请而香港apple ID需要通过电话或银行卡绑定才能使用，而异地申请香港银行卡非常麻烦。</s><br>
<a href="http://www.sohu.com/a/166464312_481438" target="_blank" rel="external">如何办理香港银行卡？2017最新收藏版！</a><br>
<a href="http://www.sohu.com/a/164265016_679976" target="_blank" rel="external">聊聊怎么低成本在香港开户一张银行卡</a><br>
<a href="http://www.icbcasia.com/ICBC/%E6%B5%B7%E5%A4%96%E5%88%86%E8%A1%8C/%E5%B7%A5%E9%93%B6%E4%BA%9A%E6%B4%B2/TC/%E5%80%8B%E4%BA%BA%E9%87%91%E8%9E%8D/%E4%BA%BA%E6%B0%91%E5%B9%A3%E5%8F%8A%E8%B7%A8%E5%A2%83%E7%90%86%E8%B2%A1/%E5%85%A7%E5%9C%B0%E5%AE%A2%E6%88%B6%E6%9C%8D%E5%8B%99%E5%B0%88%E5%8D%80/scm_aow.htm" target="_blank" rel="external">工銀亞洲內地客戶見證開戶服務介紹</a></li>
<li>购买需要香港的apple ID<br>
首先，美国的不行，美国apple ID还要绑定美国的信用卡；<br>
第二，香港apple ID只在app store登录，只要不等度iCloud，就绝不会影响账号安全！<br>
第三，app分用人民币交易的场外app和用数字货币交易的币币app，apple ID只能下载到币币app<br>
第四，场外app，要首先登录huobi官网，扫描二维码进行下载，再对app授信，才能使用。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>otcbtc<br>
2018-04-26记录</p>
<table>
<thead>
<tr>
<th>品种</th>
<th>提币费</th>
<th>提币费￥</th>
</tr>
</thead>
<tbody>
<tr>
<td>BTC</td>
<td>0.001</td>
<td>57</td>
</tr>
<tr>
<td>ETH</td>
<td>0.003</td>
<td>12</td>
</tr>
<tr>
<td>BCH</td>
<td>0.001</td>
<td>8.5</td>
</tr>
<tr>
<td>LTC</td>
<td>0.01</td>
<td>9</td>
</tr>
<tr>
<td>XRP</td>
<td>0.02</td>
<td>1</td>
</tr>
<tr>
<td>ADA</td>
<td>0.5</td>
<td>1.75</td>
</tr>
<tr>
<td>USTD</td>
<td>5</td>
<td>31.5</td>
</tr>
</tbody>
</table>
<p>另外，otcbtc的点差非常大！2018-04-26的XRP，买5.20卖5.0，点差达到4%！火币不存在这个问题！<br>
火币的点差一般为千二左右。</p>
</li>
<li>
<p>其他分类</p>
<ul>
<li>ADA<br>
<a href="https://www.cardano.org/zh/buy-sell-ada-3/" target="_blank" rel="external">ADA官网：可以购买ADA的交易所</a><br>
现货杠杆：<br>
bitfinex 有杠杆没现货<br>
<a href="http://www.bitcointradingsites.net/features/leverage/" target="_blank" rel="external">杠杆现货交易所</a></li>
</ul>
</li>
</ul>
<h4 id="场外交易">场外交易</h4>
<ul>
<li>huobi<br>
网站：<a href="http://otc.huobi.pro" target="_blank" rel="external">otc.huobi.pro</a><br>
成为中间商的要求：
<ul>
<li>申请表</li>
<li>手持身份证录制视频</li>
<li>押金5000HT<br>
4月24日值7万多人民币。</li>
</ul>
</li>
<li>otcbtc
<ul>
<li>场外交易没有api。</li>
<li>费用<br>
2018-6-29 23:59前广告免费；手续费： 成交额的 0.5 %</li>
</ul>
</li>
<li>localcoins</li>
</ul>
<h4 id="期货">期货</h4>
<h5 id="bitmex交易指南">bitmex交易指南</h5>
<ul>
<li>
<p>大幅下跌时会无法下单，例如<br>
18/03/12 22:15–15分钟，成交量5M，9706-&gt;9363</p>
</li>
<li>
<p>三种价格</p>
<ul>
<li>最新成交价<br>
网站上彩色大字的是最新成交价。instrument中key为&quot;lastPrice&quot;</li>
<li>价格指数<br>
现货交易所30分钟的平均价格。<br>
altcoin中除了ADA是参考bittrex，剩下的都参考Poloniex。<br>
只用于交割。instrument中key为&quot;indicativeSettlePrice&quot;。</li>
<li>标记价格<br>
强平会参考这个价格，而不是最新成交价。<br>
instrument中key为&quot;fairPrice&quot;。</li>
</ul>
</li>
<li>
<p>合约参考价格<br>
BMX指数是由bitstamp和gdad各贡献50%得到的；合约参考价格是基于BMX修正得到的“合理标记价格”。<br>
因为参考价格经过了修正，所以永续合约和季度合约的“标记价格”才不同。</p>
</li>
</ul>
<ul>
<li>
<p>费用</p>
<ul>
<li>maker &amp; taker<br>
maker是限价交易单，提供流动性，有0.25%的返点；<br>
taker是市价交易单，抽取流动性，交易费0.75%。<br>
该费用在永续合约与定期合约中都存在。</li>
<li>资金费用funding rate<br>
只在永续合约中存在；每天三次收取，分别在北京时间（4:00, 12:00, 20:00）；多空双方相互支付，比如，如果多单数量比较大，多单向空方支付</li>
<li>定期合约交割<br>
<strong>没有找到交割的定义，我猜测，所谓交割就是平仓。</strong> XBT交割费为0.05%，其他币为0.25%（记录于18/03/19）。</li>
<li>存款/提款 无费用</li>
</ul>
</li>
<li>
<p>仓位 &amp; 保证金</p>
<ol start="0">
<li>空仓时，可以以任意价格进行委托；有仓位时，委托价位不能超过爆仓价</li>
<li>逐仓 全仓<br>
跨期保证金<br>
默认情况下所有仓位的最初设置都为 “全仓保证金”。<br>
调整杠杆是整个仓位的杠杆！比如你有5x底仓，然后你想20倍加仓，那你最后的杠杆就是20x。</li>
<li>自动减仓机制<br>
平台会挑选杠杆高、盈利大的仓位，自动减仓，这是为了平掉对手仓，保证平台的流动性。</li>
<li><a href="https://www.bitmex.com/app/riskLimits" target="_blank" rel="external">风险限额</a>：<br>
仓位超过50XBT，会需要额外的保证金，仓位越大，额外保证金越多。</li>
<li>限价止损(Stop Limit) &amp; 限价止盈(Take Profit Limit)<br>
写在前面：触发价格默认是参考最新成交价格的，你也可以设置成标记价格或指数价格；如果在“触发后平仓”选项上打钩，那么系统只会减仓不会加仓，由于它们的行为很绕，这样可以防止失误。<br>
首先要注意，在没有达到触发价格之前，是不需要下单保证金的。<br>
其次，这个翻译好像有点问题，Stop Limit和Take Profit Limit并不是意在止损和止盈，它们的行为如下：<br>
限价止损(Stop Limit)，触发价格高于参考价格，只允许买入/做多；触发价格低于参考价格，只允许卖出/做空。<strong>这一行为与你持有多仓还是空仓并没有关系！</strong>。限价止盈(Take Profit Limit)刚好相反，触发价格高于参考价格，只允许卖出/做空；触发价格低于参考价格，只允许买入/做多。<br>
如何记忆：<br>
对于限价止损(Stop Limit)，为了方便，可以理解成系统是假设你开空的，如果你开了空仓要止损，才会触发价格高于参考价格时买入。</li>
</ol>
</li>
</ul>
<ul>
<li>其他
<ul>
<li>提币时间为每天UTC 13：00前（北京时间21：00）；</li>
<li>btc盈亏<br>
btc盈亏$ = (1$/open - 1$/close )*close = close/open = btc/$ 涨跌<br>
例如开1万$多仓，按照美元计价，那么btc价格上涨10%，收益就是1000$；下跌10%，收益是-1000$</li>
<li><a href="https://datamish.com/dashboard/db/btcusd?refresh=10s&amp;orgId=1&amp;from=1521070753057&amp;to=1523707776033" target="_blank" rel="external">Datamish: collecting dada from bitmex</a> Super useful!</li>
</ul>
</li>
</ul>
<h5 id="期权">期权</h5>
<p>只有一个strike price（执行价格），初始价格为现价（最小单位50，比如现价10020，strike price是10000）+1000$。<br>
结算日是每周五的 UTC 12:00:00。</p>
<h5 id="问题">问题</h5>
<ul>
<li>
<p>&quot;account has insufficient available balance&quot;<br>
状态： 已开空单，20x<br>
现象： 无法开10x多单<br>
答：杠杆是整个仓位的杠杆，而不是一笔交易的杠杆。由于仓位中可用余额有限，而持仓的合约很多，杠杆只能保持在很高的水平。</p>
</li>
<li>
<p>429<br>
&quot;你发出太多的请求。请稍候，然后重试。&quot;</p>
</li>
</ul>
<h5 id="bitmex自动交易">bitmex自动交易</h5>
<ul>
<li>
<p>错误</p>
<ul>
<li>无法连接服务器（没有翻墙也会导致这个问题）</li>
</ul>
 <figure class="highlight plain"><figcaption><span>22:01:47,646 - INFO - ws_thread - Started thread</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2018-03-23 22:01:52,666 - ERROR - ws_thread - Couldn&apos;t connect to WS! Exiting.</div></pre></td></tr></table></figure>
<ul>
<li>api_key错误</li>
</ul>
 <figure class="highlight plain"><figcaption><span>21:19:20,598 - INFO - ws_thread - Started thread</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2018-03-23 21:19:22,799 - ERROR - ws_thread - Handshake status 401 Unauthorized</div></pre></td></tr></table></figure>
<ul>
<li>Errno 61<br>
<code>2018-03-29 20:27:00,382 - ERROR - ws_thread - [Errno 61] Connection refused</code><br>
原因未知。</li>
</ul>
</li>
<li>
<p>获取历史数据<br>
18年之前的index、quote、trade已经获得；<br>
instrument和instrument/indices只能获取当前数据；<br>
quote不好使；</p>
</li>
</ul>
<h5 id="期货基础">期货基础</h5>
<ul>
<li>
<p>BRR()和BRTI（Bitcoin Real Time Index）是CME推出的标准化btc价格指数。</p>
</li>
<li>
<p>交易所期货：bitfinex、bitmex、okex</p>
</li>
<li>
<p>Market Order , Limit , Stop, Stop Limit<br>
市价、限价、止损/盈、限价止损/盈。Stop采用的是市价。<br>
限价会保证 成交价格，价格达不到就不成交；市价是保证成交，价格达不到就涨/降价格。</p>
</li>
</ul>
<ul>
<li>
<p>已实现亏盈和未实现亏盈<br>
比如bitmex开仓100手，那只有未实现盈亏；如果这100手平掉40手，还剩60手，那么平掉的40手就会产生未实现盈亏。</p>
</li>
<li>
<p>期货定价机制(bitmex)<br>
比特币以太坊期货等还有个名字叫做“虚拟合约”，本质可以理解为“炒空气”，期货的本质是多空互相博弈，买入来自于平空&amp;开多，卖出来自于开空&amp;平多，交易的平衡最终决定了当前成交价。但是这个价格总会和实币交易有偏差。</p>
</li>
</ul>
<p>Please note that the execution price you see is your bankruptcy price, not your liquidation price. Your liquidation price includes the maintenance margin requirement of 0.5% over 17024, which is 16935.</p>
<p>强制平仓损失=未实现亏+仓位占用的保证金。计算强平价格时候，要把持仓保证金算进去！！！</p>
<h5 id="tips">TIPS:</h5>
<ul>
<li><a href="https://www.zhihu.com/question/68686398/answer/333151303" target="_blank" rel="external">btc期货没有点差</a><br>
点差–spread</li>
<li>下载大陆用不了的app
<ul>
<li>taobao香港的AppleID就可以。<br>
买来之后只用AppleID登陆app store，而不登录iCloud，就是安全的</li>
<li>美国AppleID不行，还需要绑定美国的信用卡或paypal。注意必须用美国的户头绑定到paypal才有用。</li>
</ul>
</li>
<li>mac上，shadowsocks在命令行下士无效的。想要在命令行下shadowsocks，请参考<br>
<a href="http://www.cashqian.net/blog/001486989831982332565298e4942a2bb8f56b08f9d2475000" target="_blank" rel="external">Mac命令行终端下使用shadowsocks翻墙</a>。<br>
最终测试可以用<code>curl www.google.com</code>（注意www不能少），成功的话会返回一堆html。</li>
<li>api-connecter中时间单位是秒（例如<code>TIMEOUT = 2</code>）</li>
</ul>
<h5 id="策略">策略</h5>
<ol start="0">
<li>掉期</li>
<li>hedge</li>
<li>顺势</li>
<li><s>发动趋势</s></li>
<li>凯利公式化<br>
少量仓位一百倍杠杆，按照凯利公式的假设，要么翻倍要么赔光</li>
<li>小市值、非空气策略<br>
BNB(17)、LOOM?(67)(New)、HT(66)、ELF?(62)(weak)、NAS?(Nebulas)(56)(weak)、AE(28)、Ont(25)(New)、ADA(7)</li>
</ol>
<h5 id="交易系统研究">交易系统研究</h5>
<h6 id="boll-布林线">BOLL（布林线）</h6>
<ul>
<li>计算
<blockquote>
<p>（1）计算MA<br>
MA=N日内的收盘价之和÷N<br>
（2）计算标准差MD<br>
MD=平方根N日的（C－MA）的两次方之和除以N<br>
（3）计算MB、UP、DN线<br>
MB=（N－1）日的MA<br>
UP=MB＋2×MD<br>
DN=MB－2×MD</p>
</blockquote>
</li>
<li>信号
<ul>
<li>对于BTC日线，默认参数(20, 2)似乎确实是最有效的。<br>
20指的是平均的天数；2指的是两倍标准差；后面结论都建立在本条基础之上。<br>
如果阐述设为其他值，比如(99, 2)，那么中线和标准差都有99天的价格计算得到的，那么它对近期的价格变化非常非常不敏感！</li>
<li>超出上轨/下轨不是一点的，都会回调。</li>
<li>收窄意味着转折可能要发生。</li>
</ul>
</li>
</ul>
<h5 id="支持信息">支持信息</h5>
<p><a href="http://www.dce.com.cn/dalianshangpin/sspz/cjzx/5503775/index.html" target="_blank" rel="external">交易额比较大的期货品种</a></p>
<h3 id="金融信息">金融信息</h3>
<h4 id="宏观">宏观</h4>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/35262569" target="_blank" rel="external">比特币价格：与标准普尔 500 指数相关性创新高</a><br>
背景介绍与这对我们意味着什么？：<br>
首先，金融资产的风险，是由市场来决定的，市场承认它风险低，它才是风险低。在金融市场上，可以将金融资产按风险分类，例如，美国国债是最低风险资产，美股股指是中风险资产，美股高科技公司、新兴市场（印度巴西中国）股指是高风险资产。<br>
当市场认为现在市场整体的风险上升时，资本会向更低风险的资产流动，高风险资产贬值、低风险资产升值。例如，如果经济学家对全球经济增长不看好，那么新兴市场股指就会下跌。<br>
反过来看，要想知道一种资产的风险程度，可以看它与哪种资产的相关性高。**BTC价格与标普500相关性创新高，意味着BTC的风险在降低！**这对BTC是好消息，但对我们是坏消息。因为风险越低的资产，投资者越多，我们获得超额收益的机会就越小……</li>
</ul>
<h4 id="金融类文章">金融类文章</h4>
<p>我最近在研究对冲策略的提升，发现bitmex创始人兼CEO写的文章<br>
<a href="https://blog.bitmex.com/basic-basis-trading-strategies/" target="_blank" rel="external">Basic Basis Trading Strategies</a>，我们现在做的就是Basis Trading，稍微需要点背景知识，感兴趣可以看看。<br>
另外这是CEO亚瑟·海耶斯（ Arthur Hayes ）的介绍，沃顿商学院毕业的，背景超牛：<a href="https://www.zhihu.com/search?type=content&amp;q=%E4%BA%9A%E7%91%9F%E6%B5%B7%E8%80%B6%E6%96%AF" target="_blank" rel="external">花旗前交易员创立bitmex，仅2018一月利润就达2100万美元</a></p>
<h4 id="中英文金融词汇表">中英文金融词汇表</h4>
<p>常用术语的查询可以去：<a href="https://www.investopedia.com" target="_blank" rel="external">投资百科全书：investopedia</a></p>
<p>arbitrage/hedging – 套利/对冲（套利一般是指跨市场、高频的买卖；对冲是同时开空和多<a href="https://www.investopedia.com/ask/answers/013015/what-difference-between-arbitrage-and-hedging.asp" target="_blank" rel="external">difference between arbitrage and hedging</a> ）<br>
bids/asks – 买/卖<br>
expiry – 到期<br>
long/short – 空/多<br>
market/limit – 市价/限价<br>
maturity – 到期<br>
position – 头寸<br>
spot/future – 现货/期货<br>
spread – 点差<br>
Settlement – 交割（bitmex adapt cash settlement）</p>
<ul>
<li>
<p>期权<br>
exercise – 行权（期权术语）<br>
Call/put Option – 认购期权/认沽期权<br>
Premium – 权利金，指买进期权合约所需支付的代价，可视为由期权的内在价值及时间价值构成。<br>
stike price – 行权价格<br>
KO(Knock-out) barrier price – 译为“敲出障碍价格”。即期权的止损价格。比如看跌bitmex期权，行权价格7500，敲出障碍价格3750那么：如果到期前跌倒7000，你就赚500；如果到期前跌倒3750，你就赚3750；如果继续下跌、价格低于3750，那么合约终止。这样可以保护看跌期权的做市商不损失太多。</p>
</li>
<li>
<p>‘Mutual Fund’</p>
<blockquote>
<p>A mutual fund is an investment vehicle made up of a pool of moneys collected from many investors for the purpose of investing in securities such as stocks, bonds, money market instruments and other assets. Mutual funds are operated by professional money managers, who allocate the fund’s investments and attempt to produce capital gains and/or income for the fund’s investors. <strong>A mutual fund’s portfolio is structured and maintained to match the investment objectives stated in its prospectus.</strong></p>
</blockquote>
</li>
<li>
<p>quote/trade</p>
<blockquote>
<p>“Quote Data” usually means top-of-book bid/ask data. (Also called BBO=best bid/offer, TOB, inside market, etc.) But more generally it can also mean all the current resting orders sitting on the book at any given time. These are limit orders that are less competitive than ones at the top-of-book.<br>
“Trade Data” means the record of trades that were actually transacted.</p>
</blockquote>
</li>
<li>
<p>log return<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><br>
总结：采用log return在数学推导上有很多优点；根据log return也很容易得出raw return</p>
<blockquote>
<ol>
<li>log-normality: if we assume that prices are distributed log normally (which, in practice, may or may not be true for any given price series), then log(1 + r_i) is conveniently normally distributed</li>
<li>approximate raw-log equality: when returns are very small, log returns are close in value raw returns</li>
<li>time-additivity: the product of normally-distributed variables is not normal. Instead, the sum of normally-distributed variables is normal</li>
<li>mathematical ease: ln is easy to integration and differentiation</li>
<li>numerical stability:  multiplying small numbers is not as it is subject to arithmetic underflow, while addition of small numbers is numerically safe.</li>
</ol>
</blockquote>
</li>
</ul>
<hr>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://quantivity.wordpress.com/2011/02/21/why-log-returns/" target="_blank" rel="external">Why Log Returns</a> <strong>写的简单又专业</strong> <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>谢谢~</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay2D_small.png" alt="Tim Chen Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      Tim Chen
    </li>
    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://timchen314.com/btc_market/" title="Digital Currency Market">http://timchen314.com/btc_market/</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
    </li>
  </ul>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/block-chain/" rel="tag"># block chain</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/VPS_Vultr/" rel="next" title="Vultr VPS">
                <i class="fa fa-chevron-left"></i> Vultr VPS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/python_cookbook_note/" rel="prev" title="python cookbook note">
                python cookbook note <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/head_portrait.jpg"
               alt="Tim Chen" />
          <p class="site-author-name" itemprop="name">Tim Chen</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/TimChen314" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情站点
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://boism.org" title="浅乎" target="_blank">浅乎</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jiaxm.me" title="贾士奇" target="_blank">贾士奇</a>
                </li>
              
            </ul>
          </div>
<!-- <div id="music163player">
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=2041358705&auto=1&height=90"></iframe>
        </div>  -->







      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#市场"><span class="nav-text">市场</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#现货交易所"><span class="nav-text">现货交易所</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#场外交易"><span class="nav-text">场外交易</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#期货"><span class="nav-text">期货</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#bitmex交易指南"><span class="nav-text">bitmex交易指南</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#期权"><span class="nav-text">期权</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#问题"><span class="nav-text">问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bitmex自动交易"><span class="nav-text">bitmex自动交易</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#期货基础"><span class="nav-text">期货基础</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#tips"><span class="nav-text">TIPS:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#策略"><span class="nav-text">策略</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#交易系统研究"><span class="nav-text">交易系统研究</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#boll-布林线"><span class="nav-text">BOLL（布林线）</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#支持信息"><span class="nav-text">支持信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#金融信息"><span class="nav-text">金融信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#宏观"><span class="nav-text">宏观</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#金融类文章"><span class="nav-text">金融类文章</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#中英文金融词汇表"><span class="nav-text">中英文金融词汇表</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
<div class="copyright" >
  
  &copy;  2017 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tim Chen</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://timchen314.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://timchen314.com/btc_market/';
          this.page.identifier = 'btc_market/';
          this.page.title = 'Digital Currency Market';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://timchen314.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('5');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
